make sure getenv has no memory leaks

update pwd and oldpwd on cd, also make sure cd commands work

Merge the getenvbranch branch when its ready
Fix the memory leaks from main.c
Maybe split main.c into files
